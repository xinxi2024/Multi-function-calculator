<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>多功能计算器</title>
    <link rel="stylesheet" href="style.css" />
    <!-- <script src="https://unpkg.com/mathjs@13.0.2/lib/browser/math.min.js"></script> -->
</head>

<body>
    <div class="calculator">
        <div class="modes">
            <button class="mode-btn active" data-mode="standard">标准</button>
            <button class="mode-btn" data-mode="programmer">程序员</button>
            <button class="mode-btn" data-mode="date">日期计算</button>
            <button class="mode-btn" data-mode="math">数学</button>
        </div>

        <!-- 标准计算器 -->
        <div class="calculator-mode" id="standard-mode">
            <div class="display">
                <div class="previous-operand"></div>
                <div class="current-operand">0</div>
            </div>
            <div class="buttons">
                <button class="btn clear">AC</button>
                <button class="btn delete">DEL</button>
                <button class="btn operation">%</button>
                <button class="btn operation">÷</button>

                <button class="btn number">7</button>
                <button class="btn number">8</button>
                <button class="btn number">9</button>
                <button class="btn operation">×</button>

                <button class="btn number">4</button>
                <button class="btn number">5</button>
                <button class="btn number">6</button>
                <button class="btn operation">-</button>

                <button class="btn number">1</button>
                <button class="btn number">2</button>
                <button class="btn number">3</button>
                <button class="btn operation">+</button>

                <button class="btn number">0</button>
                <button class="btn number">.</button>
                <button class="btn operation">x^y</button>
                <button class="btn equals">=</button>

                <!-- 新增功能行 -->
                <button class="btn operation">√</button>
                <button class="btn operation">ⁿ√</button>
                <button class="btn operation">a/b</button>
                <button class="btn"></button> <!-- 占位 -->
            </div>
        </div>

        <!-- 程序员计算器 -->
        <div class="calculator-mode hidden" id="programmer-mode">
            <div class="display">
                <div class="previous-operand"></div>
                <div class="current-operand">0</div>
            </div>
            <div class="programmer-radix">
                <label><input type="radio" name="radix" value="16" checked /> 十六进制</label>
                <label><input type="radio" name="radix" value="10" /> 十进制</label>
                <label><input type="radio" name="radix" value="8" /> 八进制</label>
                <label><input type="radio" name="radix" value="2" /> 二进制</label>
            </div>
            <div class="bit-length">
                <label><input type="radio" name="bit-length" value="8" /> 8位</label>
                <label><input type="radio" name="bit-length" value="16" /> 16位</label>
                <label><input type="radio" name="bit-length" value="32" checked /> 32位</label>
                <label><input type="radio" name="bit-length" value="64" /> 64位</label>
            </div>
            <div class="bit-display"></div>
            <div class="buttons" id="programmer-buttons">
                <button class="btn clear">AC</button>
                <button class="btn delete">DEL</button>
                <button class="btn operation">AND</button>
                <button class="btn operation">OR</button>
                <button class="btn hex">D</button>
                <button class="btn hex">E</button>
                <button class="btn hex">F</button>
                <button class="btn operation">XOR</button>
                <button class="btn hex">A</button>
                <button class="btn hex">B</button>
                <button class="btn hex">C</button>
                <button class="btn operation">NOT</button>
                <button class="btn number">7</button>
                <button class="btn number">8</button>
                <button class="btn number">9</button>
                <button class="btn operation">&lt;&lt;</button>
                <button class="btn number">4</button>
                <button class="btn number">5</button>
                <button class="btn number">6</button>
                <button class="btn operation">&gt;&gt;</button>
                <button class="btn number">1</button>
                <button class="btn number">2</button>
                <button class="btn number">3</button>
                <button class="btn operation">MOD</button>
                <button class="btn number">0</button>
                <button class="btn equals">=</button>
            </div>
        </div>

        <!-- 日期计算器 -->
        <div class="calculator-mode hidden" id="date-mode">
            <div class="date-inputs">
                <div class="date-input-group">
                    <label>第一个日期</label>
                    <input type="date" id="date1" value="" />
                </div>
                <div class="date-input-group">
                    <label>第二个日期</label>
                    <input type="date" id="date2" value="" />
                </div>
            </div>
            <div class="date-input-group">
                <label>计算类型</label>
                <select id="date-operation">
                    <option value="diff">计算两个日期之间的天数</option>
                    <option value="add">添加天数到日期</option>
                    <option value="subtract">从日期减去天数</option>
                </select>
            </div>
            <div class="date-input-group" id="days-group">
                <label>天数</label>
                <input type="number" id="days-value" value="0" min="0" />
            </div>
            <div class="date-result" id="date-result">选择日期和操作</div>
            <div class="date-buttons">
                <button class="date-btn" id="calculate-date">计算</button>
                <button class="date-btn" id="reset-date">重置</button>
            </div>
        </div>

        <!-- 数学模式 -->
        <div class="calculator-mode hidden" id="math-mode">
            <div class="math-inputs">
                <div class="math-input-group">
                    <label>计算类型</label>
                    <select id="math-operation">
                        <option value="quadratic-equation">解一元二次方程 (ax² + bx + c = 0)</option>
                        <option value="quadratic-inequality">解一元二次不等式 (ax² + bx + c ? 0)</option>
                        <option value="absolute-inequality">解绝对值不等式 (|expr| ? k)</option>
                    </select>
                </div>
                <div class="math-input-group coeff-group" id="quadratic-coeffs">
                    <div><label>a</label><input type="text" id="a-value" value="1" /></div>
                    <div><label>b</label><input type="text" id="b-value" value="0" /></div>
                    <div><label>c</label><input type="text" id="c-value" value="0" /></div>
                </div>
                <div class="math-input-group" id="inequality-sign" style="display: none;">
                    <label>不等号</label>
                    <select id="ineq-sign">
                        <option value=">">&gt;</option>
                        <option value="&lt;">&lt;</option>
                        <option value=">=">&ge;</option>
                        <option value="&lt;=">&le;</option>
                    </select>
                </div>
                <div class="math-input-group abs-options" id="abs-type" style="display: none;">
                    <label>绝对值类型</label>
                    <select id="abs-expr-type">
                        <option value="linear">一元一次 (ax + b)</option>
                        <option value="quadratic">一元二次 (ax² + bx + c)</option>
                    </select>
                </div>
                <div class="math-input-group abs-options coeff-group" id="abs-linear-coeffs" style="display: none;">
                    <div><label>a</label><input type="text" id="abs-a-linear" value="1" /></div>
                    <div><label>b</label><input type="text" id="abs-b-linear" value="0" /></div>
                </div>
                <div class="math-input-group abs-options coeff-group" id="abs-quadratic-coeffs" style="display: none;">
                    <div><label>a</label><input type="text" id="abs-a-quad" value="1" /></div>
                    <div><label>b</label><input type="text" id="abs-b-quad" value="0" /></div>
                    <div><label>c</label><input type="text" id="abs-c-quad" value="0" /></div>
                </div>
                <div class="math-input-group abs-options" id="abs-ineq-sign" style="display: none;">
                    <label>不等号</label>
                    <select id="abs-ineq-sign">
                        <option value=">">&gt;</option>
                        <option value="&lt;">&lt;</option>
                        <option value=">=">&ge;</option>
                        <option value="&lt;=">&le;</option>
                    </select>
                </div>
                <div class="math-input-group abs-options" id="abs-k-value" style="display: none;">
                    <label>右边常数 k</label>
                    <input type="text" id="k-value" value="0" />
                </div>
            </div>
            <div class="math-result" id="math-result">选择计算类型</div>
            <div class="math-buttons">
                <button class="math-btn" id="calculate-math">计算</button>
                <button class="math-btn" id="reset-math">重置</button>
            </div>
        </div>
    </div>
    <script src="./script.js"></script>
</body>
<!-- 说明书按钮 -->
<button id="help-btn" class="help-button">?</button>

<!-- 说明书弹窗 -->
<div id="help-modal" class="help-modal hidden">
    <div class="help-content">
        <span class="close-btn">&times;</span>
        <h2>数学表达式输入指南</h2>
        <p>在数学模块中，您可输入以下表达式：</p>
        <ul>
            <li><code>2**3</code> 或 <code>2^3</code> → 2 的 3 次方</li>
            <li><code>sqrt(2)</code> → √2</li>
            <li><code>cbrt(8)</code> → ∛8</li>
            <li><code>abs(-5)</code> → 绝对值</li>
            <li><code>sin(pi/2)</code>, <code>cos(0)</code>, <code>tan(pi/4)</code></li>
            <li><code>log(100)</code> → 常用对数（底为10）</li>
            <li><code>ln(e)</code> → 自然对数（底为e）</li>
            <li><code>pi</code>, <code>e</code> → 数学常数</li>
            <li><code>1/2</code> → 分数</li>
        </ul>
        <p><strong>示例</strong>：<br>
            解方程 <code>x² + 4x - 8 = 0</code>：<br>
            a = <code>1</code>, b = <code>2**2</code>, c = <code>-8</code>
        </p>
        <p>点击任意空白处或 × 关闭本说明。</p>
    </div>
</div>

</html>